<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="mb-8">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold text-gray-900">แก้ไขข้อมูลหอพัก</h1>
          <p class="text-gray-600 mt-2">แก้ไขข้อมูลหอพัก: {{ dormId }}</p>
        </div>
        <button
          (click)="goBack()"
          class="px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"
        >
          <i class="fas fa-arrow-left mr-2"></i>
          กลับ
        </button>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="flex justify-center items-center py-12">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
    </div>

    <!-- Form -->
    <div *ngIf="!isLoading" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
      <form [formGroup]="dormForm" (ngSubmit)="onSubmit()">
        <!-- ข้อมูลพื้นฐาน -->
        <div class="space-y-6 mb-8">
          <h2 class="text-xl font-semibold text-gray-900 mb-6 pb-3 border-b border-gray-200">
            ข้อมูลพื้นฐาน
          </h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ชื่อหอพัก <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                formControlName="dorm_name"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="กรอกชื่อหอพัก"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ที่อยู่ <span class="text-red-500">*</span>
              </label>
              <textarea
                formControlName="address"
                rows="3"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="กรอกที่อยู่หอพัก"
              ></textarea>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                โซน
              </label>
              <select
                formControlName="zone_id"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
              >
                <option value="">เลือกโซน</option>
                <option *ngFor="let zone of zones" [value]="zone.zone_id">
                  {{ zone.zone_name }}
                </option>
              </select>
            </div>
            
            <div class="md:col-span-2">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                รายละเอียดหอพัก
              </label>
              <textarea
                formControlName="dorm_description"
                rows="4"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="กรอกรายละเอียดหอพัก"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- ประเภทห้องและราคา -->
        <div class="space-y-6 mb-8">
          <h2 class="text-xl font-semibold text-gray-900 mb-6 pb-3 border-b border-gray-200">
            ประเภทห้องและราคา
          </h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ประเภทห้อง <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                formControlName="room_type"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="เช่น ห้องแอร์, ห้องคู่"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ราคาต่อเดือน (บาท)
              </label>
              <input
                type="number"
                formControlName="monthly_price"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="3500"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ราคาต่อวัน (บาท)
              </label>
              <input
                type="number"
                formControlName="daily_price"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="150"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ราคาซัมเมอร์ (บาท)
              </label>
              <input
                type="number"
                formControlName="summer_price"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="9000"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ค่าประกัน (บาท)
              </label>
              <input
                type="number"
                formControlName="deposit"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="3500"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ค่าไฟ (บาท/หน่วย) <span class="text-red-500">*</span>
              </label>
              <input
                type="number"
                formControlName="electricity_price"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="8"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ประเภทค่าน้ำ <span class="text-red-500">*</span>
              </label>
              <select
                formControlName="water_price_type"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
              >
                <option value="">เลือกประเภท</option>
                <option value="ตามหน่วย">ตามหน่วย</option>
                <option value="ตามอัตรา">ตามอัตรา</option>
                <option value="คิดตามหน่วย">คิดตามหน่วย</option>
                <option value="คิดรายเดือน">คิดรายเดือน</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ค่าน้ำ
              </label>
              <input
                type="number"
                formControlName="water_price"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="100"
                [disabled]="dormForm.get('water_price_type')?.value === 'ตามอัตรา'"
              />
            </div>
          </div>
        </div>

        <!-- พิกัด -->
        <div class="space-y-6 mb-8">
          <h2 class="text-xl font-semibold text-gray-900 mb-6 pb-3 border-b border-gray-200">
            พิกัดที่ตั้งหอพัก
          </h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ละติจูด <span class="text-red-500">*</span>
              </label>
              <input
                type="number"
                formControlName="latitude"
                step="any"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="16.2467"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                ลองจิจูด <span class="text-red-500">*</span>
              </label>
              <input
                type="number"
                formControlName="longitude"
                step="any"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
                placeholder="103.2565"
              />
            </div>
          </div>
          
          <!-- Map -->
          <div class="mt-4">
            <div
              id="edit-map"
              class="w-full h-96 rounded-lg overflow-hidden border border-gray-200"
            ></div>
          </div>
        </div>

        <!-- สถานะอนุมัติ -->
        <div class="space-y-6 mb-8">
          <h2 class="text-xl font-semibold text-gray-900 mb-6 pb-3 border-b border-gray-200">
            สถานะอนุมัติ
          </h2>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              สถานะการอนุมัติ
            </label>
            <select
              formControlName="approval_status"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"
            >
              <option value="">เลือกสถานะ</option>
              <option value="pending">รออนุมัติ</option>
              <option value="approved">อนุมัติ</option>
              <option value="rejected">ปฏิเสธ</option>
            </select>
          </div>
          
          <div class="mt-4">
            <button
              type="button"
              (click)="onUpdateApprovalStatus()"
              class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
            >
              อัปเดตสถานะการอนุมัติ
            </button>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="flex justify-end">
          <button
            type="submit"
            [disabled]="isSubmitting || !dormForm.valid"
            class="px-8 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
          >
            {{ isSubmitting ? 'กำลังบันทึก...' : 'บันทึกการแก้ไข' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
